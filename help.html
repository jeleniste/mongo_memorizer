<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.12: http://docutils.sourceforge.net/" />
<title>mongo memorizer</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7614 2013-02-21 15:55:51Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title, .code .error {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { color: grey; } /* line numbers */
pre.code, code { background-color: #eeeeee }
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

/* "booktabs" style (no vertical lines) */
table.docutils.booktabs {
  border: 0px;
  border-top: 2px solid;
  border-bottom: 2px solid;
  border-collapse: collapse;
}
table.docutils.booktabs * {
  border: 0px;
}
table.docutils.booktabs th {
  border-bottom: thin solid;
  text-align: left;
}

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="mongo-memorizer">
<h1 class="title">mongo memorizer</h1>

<div class="section" id="functionality">
<h1>Functionality</h1>
<p>Mongo memorizer select geojsons from mongo database and make qgis memory layer
from this. There is possible use mongo query (it must be valid json).</p>
<p>There is possible to define host, password and authentication parameters, if it
is nescessary.</p>
<div class="figure align-center">
<img alt="screenshots/mongo_memorizer.png" src="screenshots/mongo_memorizer.png" style="width: 30em;" />
</div>
</div>
<div class="section" id="data">
<h1>Data</h1>
<p>Data must be valid geojson, with one exception, there is possible use more than
one subelement with geometry (but name of alternative geometry must be different
from geometry). Or geometry can have different name (for example if you need to
use bounding box for filtering etc).</p>
<p>If you want to use spatial index, geometry must be valid (sample data aren`t).</p>
<p>Geojson should be in this fashion:</p>
<pre class="code json literal-block">
<span class="punctuation">{</span>
        <span class="name tag">&quot;_id&quot;</span> <span class="punctuation">:</span> <span class="error">NumberLong(</span><span class="literal string double">&quot;31525565010&quot;</span><span class="error">)</span><span class="punctuation">,</span>
        <span class="name tag">&quot;geometry&quot;</span> <span class="punctuation">:</span> <span class="punctuation">{</span>
                <span class="name tag">&quot;type&quot;</span> <span class="punctuation">:</span> <span class="literal string double">&quot;Polygon&quot;</span><span class="punctuation">,</span>
                <span class="name tag">&quot;coordinates&quot;</span> <span class="punctuation">:</span> <span class="punctuation">[</span>
                        <span class="punctuation">[</span>
                                <span class="punctuation">[</span>
                                        <span class="literal number float">12.639899812059387</span><span class="punctuation">,</span>
                                        <span class="literal number float">50.18799746731742</span>
                                <span class="punctuation">],</span>
                                <span class="punctuation">[</span>
                                        <span class="literal number float">12.63980863624595</span><span class="punctuation">,</span>
                                        <span class="literal number float">50.188038896579606</span>
                                <span class="punctuation">],</span>
                                <span class="punctuation">[</span>
                                        <span class="literal number float">12.63985711214033</span><span class="punctuation">,</span>
                                        <span class="literal number float">50.18808683912924</span>
                                <span class="punctuation">],</span>
                                <span class="punctuation">[</span>
                                        <span class="literal number float">12.639879484859948</span><span class="punctuation">,</span>
                                        <span class="literal number float">50.18807632413388</span>
                                <span class="punctuation">],</span>
                                <span class="punctuation">[</span>
                                        <span class="literal number float">12.639951960147378</span><span class="punctuation">,</span>
                                        <span class="literal number float">50.18804378805749</span>
                                <span class="punctuation">],</span>
                                <span class="punctuation">[</span>
                                        <span class="literal number float">12.639899812059387</span><span class="punctuation">,</span>
                                        <span class="literal number float">50.18799746731742</span>
                                <span class="punctuation">]</span>
                        <span class="punctuation">]</span>
                <span class="punctuation">]</span>
        <span class="punctuation">},</span>
        <span class="name tag">&quot;type&quot;</span> <span class="punctuation">:</span> <span class="literal string double">&quot;Feature&quot;</span><span class="punctuation">,</span>
        <span class="name tag">&quot;properties&quot;</span> <span class="punctuation">:</span> <span class="punctuation">{</span>
                <span class="name tag">&quot;PododdeleniCisla&quot;</span> <span class="punctuation">:</span> <span class="literal number integer">20</span><span class="punctuation">,</span>
                <span class="name tag">&quot;ZpusobyVyuzitiPozemku&quot;</span> <span class="punctuation">:</span> <span class="literal number integer">23</span><span class="punctuation">,</span>
                <span class="name tag">&quot;KmenoveCislo&quot;</span> <span class="punctuation">:</span> <span class="literal number integer">446</span><span class="punctuation">,</span>
                <span class="name tag">&quot;PlatiOd&quot;</span> <span class="punctuation">:</span> <span class="literal string double">&quot;2013-09-27T00:00:00&quot;</span><span class="punctuation">,</span>
                <span class="name tag">&quot;VymeraParcely&quot;</span> <span class="punctuation">:</span> <span class="literal number integer">52</span><span class="punctuation">,</span>
                <span class="name tag">&quot;KatastralniUzemi&quot;</span> <span class="punctuation">:</span> <span class="punctuation">{</span>
                        <span class="name tag">&quot;Kod&quot;</span> <span class="punctuation">:</span> <span class="literal number integer">752223</span>
                <span class="punctuation">},</span>
                <span class="name tag">&quot;DruhCislovaniKod&quot;</span> <span class="punctuation">:</span> <span class="literal number integer">2</span><span class="punctuation">,</span>
                <span class="name tag">&quot;IdTransakce&quot;</span> <span class="punctuation">:</span> <span class="literal number integer">355913</span><span class="punctuation">,</span>
                <span class="name tag">&quot;DruhPozemkuKod&quot;</span> <span class="punctuation">:</span> <span class="literal number integer">14</span><span class="punctuation">,</span>
                <span class="name tag">&quot;RizeniId&quot;</span> <span class="punctuation">:</span> <span class="error">NumberLong(</span><span class="literal string double">&quot;27044904010&quot;</span><span class="error">)</span><span class="punctuation">,</span>
                <span class="name tag">&quot;Id&quot;</span> <span class="punctuation">:</span> <span class="error">NumberLong(</span><span class="literal string double">&quot;31525565010&quot;</span><span class="error">)</span>
        <span class="punctuation">},</span>
        <span class="name tag">&quot;geometry_p&quot;</span> <span class="punctuation">:</span> <span class="punctuation">{</span>
                <span class="name tag">&quot;type&quot;</span> <span class="punctuation">:</span> <span class="literal string double">&quot;Point&quot;</span><span class="punctuation">,</span>
                <span class="name tag">&quot;coordinates&quot;</span> <span class="punctuation">:</span> <span class="punctuation">[</span>
                        <span class="literal number float">12.639870657036909</span><span class="punctuation">,</span>
                        <span class="literal number float">50.18803879095269</span>
                <span class="punctuation">]</span>
        <span class="punctuation">}</span>
<span class="punctuation">}</span>
</pre>
<p>Sample data can be imported like this (if you are on localhost and mongo runs
without authentization)</p>
<pre class="code bash literal-block">
mongoimport --db mongo_memorizer --collection Parcely --drop --file sample.json
</pre>
<p>Elements in one collection should have the same geometry type (if they have the
same name of geometry subdocument)</p>
</div>
<div class="section" id="connecting">
<h1>Connecting</h1>
<p>Default for connection is port 27017 on localhost. I you run mongo without
authentication, you could't change anything. But you can change port, host, set
user and password and select authentication method, SCRAM-SHA-1 is default.
You should set authentication database too (it is not the same as database with
your features).</p>
<div class="figure">
<img alt="screenshots/connection.png" src="screenshots/connection.png" />
</div>
<p>If your user have not permission for <em>show databases</em> in mongo, plugin will not
be able to fill combo box with databases and you will be asked for set name of
database you want to use.</p>
</div>
<div class="section" id="selecting-collection">
<h1>Selecting collection</h1>
<div class="figure">
<img alt="screenshots/collection_select.png" src="screenshots/collection_select.png" />
</div>
<p>If you are connected, you can select database and collection with your data. You
must select database to enable combo box with collections. After you select
collection, run button will be enabled.</p>
<p>You can use limit for obtain only few elements, and check box for filtering by
map canvas will be enabled, if your geometry is in lat/lon. But be careful on
project SRID.</p>
</div>
<div class="section" id="querying">
<h1>Querying</h1>
<div class="figure">
<img alt="screenshots/query.png" src="screenshots/query.png" />
</div>
<p>You can filter data by querry (but if you use geometry querry and filter by map
canvas, your querry will be overvriten). You can try, if your query is valid and
if is, count of features in result will be returned. Querry must be valid json.</p>
<div class="section" id="query-examples">
<h2>Query examples</h2>
<p>Features with geometry</p>
<pre class="code json literal-block">
<span class="punctuation">{</span><span class="name tag">&quot;geometry&quot;</span><span class="punctuation">:{</span><span class="name tag">&quot;$exists&quot;</span><span class="punctuation">:</span><span class="literal number integer">1</span><span class="punctuation">}}</span>
</pre>
<p>Feature has _id with some value</p>
<pre class="code json literal-block">
<span class="punctuation">{</span><span class="name tag">&quot;_id&quot;</span><span class="punctuation">:</span><span class="literal number integer">32097350010</span><span class="punctuation">}</span>
</pre>
<p>Value of <em>Id</em> in properties has some value.</p>
<pre class="code json literal-block">
<span class="punctuation">{</span><span class="name tag">&quot;properties.Id&quot;</span><span class="punctuation">:</span> <span class="literal number integer">32097350010</span><span class="punctuation">}</span>
</pre>
</div>
</div>
</div>
</body>
</html>
